
// data object store the youtube list
const data = [
  {
    id: "-EQO6YMIzqg",
    videoUrl:
      "https://www.youtube.com/embed/-EQO6YMIzqg?playlist=-EQO6YMIzqg&loop=1?playlist=-EQO6YMIzqg&loop=1?controls=1",
    videoThumbnail: "https://i.ytimg.com/vi/-EQO6YMIzqg/maxresdefault.jpg",
    videoTitle:
      "5 Mystical Spaces of Agastya, The Great Indian Sage – Sadhguru Reveals!",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 8,
      dislike: 2
    },
    comments: [
      {
        userName: "Vinay Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Abhinav Bindra",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 7,
          dislike: 2
        }
      },
      {
        userName: "Sailaja",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 4,
          dislike: 2
        }
      }
    ]
  },
  {
    id: "sqqrpjYWzaYY",
    videoUrl:
      "https://www.youtube.com/embed/sqqrpjYWzaYY?playlist=sqqrpjYWzaY&loop=1?playlist=sqqrpjYWzaY&loop=1?controls=1",
    videoThumbnail: "https://i1.ytimg.com/vi/sqqrpjYWzaY/hqdefault.jpg",
    videoTitle:
      "How to Make Best Use of This Quarantine Period - With Sadhguru in Challenging Times",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 58,
      dislike: 52
    },
    comments: [
      {
        userName: "Rakesh Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Abhi Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Chanukya Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      }
    ]
  },
  {
    id: "wv-aai4rw5I",
    videoUrl:
      "https://www.youtube.com/embed/wv-aai4rw5I&t=47s?playlist=wv-aai4rw5I&t=47s&loop=1?playlist=wv-aai4rw5I&t=47s&loop=1?controls=1",
    videoTitle: "A Book for All Those Who Shall Die | Book on Death | Sadhguru",
    videoThumbnail: "https://i1.ytimg.com/vi/wv-aai4rw5I/hqdefault.jpg",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 58,
      dislike: 25
    },
    comments: [
      {
        userName: "Kishore Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Rekha Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Sindhu Kureshi",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      }
    ]
  },
  {
    id: "X-zU6Ay6ivU",
    videoUrl:
      "https://www.youtube.com/embed/X-zU6Ay6ivU?playlist=X-zU6Ay6ivU&loop=1?playlist=X-zU6Ay6ivU&loop=1?controls=1",
    videoTitle: "Bohemian Rhapsody | Muppet Music Video | The Muppets",
    videoThumbnail: "https://i.ytimg.com/vi/X-zU6Ay6ivU/maxresdefault.jpg",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 2,
      dislike: 4
    },
    comments: [
      {
        userName: "Veeresh",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Kathuri",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Rakesh",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      }
    ]
  },
  {
    id: "GTpSDtVZRuE",
    videoUrl:
      "https://www.youtube.com/embed/GTpSDtVZRuE?playlist=GTpSDtVZRuE&loop=1?playlist=GTpSDtVZRuE&loop=1?controls=1",
    videoTitle:
      "Climate Action and Reducing Human Footprint - Sadhguru at UNCCD COP 14",
    videoThumbnail: "https://i.ytimg.com/vi/GTpSDtVZRuE/maxresdefault.jpg",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 4,
      dislike: 5
    },
    comments: [
      {
        userName: "kishore",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Muni",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Mounica",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      }
    ]
  },
  {
    id: "vEJOywx9Eq8",
    videoUrl:
      "https://www.youtube.com/embed/vEJOywx9Eq8?playlist=vEJOywx9Eq8&loop=1?playlist=vEJOywx9Eq8&loop=1?controls=1",
    videoTitle: "Sadhguru at United Nations: Yoga – The Power of Inclusion",
    videoThumbnail: "https://i.ytimg.com/vi/vEJOywx9Eq8/maxresdefault.jpg",
    totalViews: "2,35,656",
    publishDate: "23 Nov 2009",
    reviews: {
      like: 8,
      dislike: 2
    },
    comments: [
      {
        userName: "Rawat singh",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Teja Swamy",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      },
      {
        userName: "Charan",
        comment:
          "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do  ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum",
        reviews: {
          like: 8,
          dislike: 2
        }
      }
    ]
  }
];

// search global variable
let searchText = "";
let previewList = [];

// parse data object get video id and title
const parseData = () =>
  data.map(o => {
    return {
      id: o.id,
      label: o.videoTitle
    };
  });

  // suggestion list
const searchFilter = searchKey => {
  if (searchKey) {
    let formattedList = parseData();
    previewList = formattedList.filter(
      o => o.label.toLowerCase().indexOf(searchKey) > -1
    );
  } else {
    previewList = [];
  }
  generateNewList();
};

const generateNewList = () => {
  document.querySelector(".search-list-container").innerHTML = "";
  if (previewList.length > 0) {
    const list = previewList.forEach(obj => {
      let node = document.createElement("li");
      node.className = "search-list-items";
      let textnode = document.createTextNode(obj.label);
      node.appendChild(textnode);
      document.querySelector(".search-list-container").appendChild(node);
    });
  }
};

document.querySelector("#search-input").addEventListener("keyup", e => {
  searchFilter(e.target.value);
});
document.querySelector("#search-input").addEventListener("focusin", e => {
  document.querySelector(".search-list").classList.remove("hidden");
});
document.querySelector("#search-input").addEventListener("focusout", e => {
  setTimeout(() => {
    document.querySelector(".search-list").classList.add("hidden");
    previewList = [];
  }, 1000);
});

// search functionality
document
  .querySelector(".search-list-container")
  .addEventListener("click", e => {
    console.log("log: ", "clicked");
    const searchValue = e.target.innerHTML;
    searchText = searchValue;
    document.querySelector("#search-input").value = searchValue;
    const selectedItem = parseData().filter(i => i.label == searchValue);
    console.log("log: -- ", searchValue, selectedItem);
    if (selectedItem.length > 0) {
      loadNewVideo(selectedItem[0].id);
    }
  });

// main screen -- video view -- .current-play
let currentPlayingVideoId = "-EQO6YMIzqg";
const loadSelectedVideo = () => {
  const mainVideo = data.filter(i => i.id == currentPlayingVideoId)[0];
  console.log(mainVideo);
  document
    .querySelector(".current-play .main-video")
    .setAttribute("src", mainVideo.videoUrl);
  document.querySelector(".current-play .description .video-title").innerHTML =
    mainVideo.videoTitle;
  document.querySelector(
    ".current-play .description .review .views"
  ).innerHTML = mainVideo.totalViews;
  document.querySelector(".current-play .description .review #date").innerHTML =
    mainVideo.publishDate;

  document.querySelector(
    ".current-play .description .video-sentiments .like span"
  ).innerHTML = mainVideo.reviews.like;
  document.querySelector(
    ".current-play .description .video-sentiments .dislike span"
  ).innerHTML = mainVideo.reviews.dislike;

  // video comments
  let comments = mainVideo.comments.map(comment => {
    return `<div class="ph-5"><h4 class="user-name">${comment.userName}</h4>
    <h5 class="comment pv-5">${comment.comment}</h5>
    <div class="video-sentiments flex-a-c pv-5">
      <div class="like flex-a-c pr-5">
        <i class="fa fa-thumbs-up" for="up" aria-hidden="true"></i>
        <span class="ph-5">${comment.reviews.like}</span>
      </div>
      <div class="dislike flex-a-c">
        <i class="fa fa-thumbs-down" for="down" aria-hidden="true"></i>
        <span class="ph-5">${comment.reviews.dislike}</span>
      </div>
    </div>
    </div>`;
  });

  document.querySelector(".current-play .comment-list").innerHTML = comments;
};
loadSelectedVideo();

// side videos preview
const refreshPlayList = () => {
  videoListWithoutCurrentPlayingVideo = data.filter(
    i => i.id !== currentPlayingVideoId
  );
  let videoList = videoListWithoutCurrentPlayingVideo.map(obj => {
    return `<div class="pv-5">
    <div onclick="onPlaylistVideoClick('${obj.id}')">
    <img
      height="200"
      width="400"
      class="main-video"
      src="${obj.videoThumbnail}"
    />
    </div>
    <div class="description">
      <h5>${obj.videoTitle}</h5>
    </div>
  </div>`;
  });
  document.querySelector(".right-side-video-list").innerHTML = videoList;
};

refreshPlayList();

const onPlaylistVideoClick = id => {
  loadNewVideo(id);
};

// load new video
const loadNewVideo = id => {
  currentPlayingVideoId = id;
  console.log("log: current playing video id: ", currentPlayingVideoId);
  window.scroll({
    top: 0,
    left: 0,
    behavior: "smooth"
  });
  loadSelectedVideo();
  refreshPlayList();
};
